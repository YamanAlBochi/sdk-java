:doctype: article
:icons: font
:source-highlighter: highlightjs
:docname: Java SDK
:sectlinks:
:snippets:





++++

<h1>Java SDK</h1>


<div align="center">

<br>
<br>


<img  src="https://www.modzy.com/wp-content/uploads/2019/10/modzy-logo-tm.svg" alt="Modzy" width="350" height="auto">

<br>
<br>
<br>
<br>




<p><b>Modzy's Java SDK queries models, submits inference jobs and returns results directly to your editor.</b></p>


<br>


<img alt="GitHub contributors" src="https://img.shields.io/github/contributors/modzy/sdk-java">

<img alt="GitHub last commit" src="https://img.shields.io/github/last-commit/modzy/sdk-java">

<img alt="GitHub Release Date" src="https://img.shields.io/github/release-date/modzy/sdk-java">

</div>

<br>
<br>

<div align="center">
<a href=https://models.modzy.com/docs/how-to-guides/job-lifecycle style="text-decoration:none">The job lifecycle</a> |
<a href=https://models.modzy.com/docs/how-to-guides/api-keys style="text-decoration:none">API keys</a> |
<a href=/samples style="text-decoration:none">Samples</a> |
<a href=https://models.modzy.com/docs/home/home style="text-decoration:none">Documentation</a>


<br>
<br>

</div>

<br>


++++

== Installation

++++
<br>
<div align="center">
<a href="https://asciinema.org/a/CMMbns4Pp4TpTkZdXgMFiguDs"><img src="install.gif" style="max-width:100%"/></a>
</div>
<br>
++++

Clone the repository:

- `$ git clone https://github.com/modzy/sdk-java.git`

++++
<p>Use <a href=https://maven.apache.org/ style="text-decoration:none">maven</a> to install the SDK. </p>
++++

- `$ ./mvnw install -DskipTests=true`

In case you get the permission denied error (Unix):

- `$ chmod +x mvnw`

Add the dependency in your `pom.xml` file:

[source, xml]
----
<dependency>
	<groupId>com.modzy</groupId>
	<artifactId>modzy-sdk</artifactId>
	<version>0.0.1</version>
</dependency>
----

== Usage


=== Initialize

Once you have a `model` and `version` identified, authenticate to Modzy with your API key:

[source, java]
----
ModzyClient modzyClient = new ModzyClient("http://url.to.modzy/api", "my_key.modzy");
----

=== Basic usage

++++
<br>
++++

The code below is applicable for `text/plain` input type.


++++
<div align="center">

<img src="java.gif" alt="basic usage" style="max-width:100%">

</div>

<br>
++++



Browse models:

[source, java]
----
List<Model> models = modzyClient.getAllModels();
for( Model model : models ){
    System.out.println("Model: "+model);
}
----

Get a model's details by identifier:

[source, java]
----
Model saModel = modzyClient.getModel("ed542963de");
System.out.println("Model: "+saModel);
----

Get a model's details by name:

[source, java]
----
Model saModel = modzyClient.getModelByName("Sentiment Analisis");
System.out.println("Model: "+saModel);
----

Submit a job providing the model, version, and input file. Hold until the inference is complete and results become available:

[source, java]
----
Job job = modzyClient.submitJobText("ed542963de", "0.0.27", "Modzy is great!");
----

Hold until the inference is complete and results become available:

[source, java]
----
Job job = modzyClient.blockUntilComplete(job, 20000);
----

Get the output results:

[source, java]
----
JobOutput<JsonNode> jobResult = modzyClient.getResult(job);
Map<String,Map<String,JsonNode>> results = jobResult.getResults();
----

== Fetch errors

Errors may arise for different reasons. Fetch errors to know what is their cause and how to fix them.

[cols="1,1"]
|===
|`ApiException` | Wrapper for different exceptions, check the message and the stacktrace.
|===

Submitting jobs:

[source, java]
----
try{
    Map<String,JsonNode> retValue = this.modzyClient.submitJobTextBlockUntilComplete("ed542963de", "Modzy is great!");
}
catch(ApiException ae){
    System.out.println("The job submission fails with message "+ae.getMessage());
    as.printStackTrace();
}
----

== Features

Currently we support the following api routes:

:doc-pages: https://models.modzy.com/docs/
[cols=3*, stripes=even]
|===
|Feature|Code|Api route

|[small]#Get all models#
|[small]#modzyClient.getAllModels()#
|[small]#link:{doc-pages}marketplace/models/retrieve-all-models-versions[/api/models/all/versions/all]#

|[small]#List some models#
|[small]#modzyClient.getModels()#
|[small]#link:{doc-pages}marketplace/models/retrieve-models[/api/models]#

|[small]#Get model details#
|[small]#modzyClient.getModel()#
|[small]#link:{doc-pages}marketplace/models/retrieve-model-details[/api/models/:modelId]#

|[small]#Search models by name#
|[small]#modzyClient.getModelByName()#
|[small]#link:{doc-pages}marketplace/models/search-model-details[/api/models/search]#

|[small]#Get related models#
|[small]#modzyClient.getRelatedModels()#
|[small]#link:{doc-pages}marketplace/models/retrieve-related-models[/api/models/:modelId/related-models]#

|[small]#List model versions#
|[small]#modzyClient.getModelVersions()#
|[small]#link:{doc-pages}marketplace/versions/retrieve-versions[/api/models/:modelId/versions]#

|[small]#Get version details#
|[small]#modzyClient.getModelVersion()#
|[small]#link:{doc-pages}marketplace/versions/retrieve-version-details[/api/models/:modelId/versions/:version]#

|[small]#List tags#
|[small]#modzyClient.getAllTags()#
|[small]#link:{doc-pages}marketplace/tags/retrieve-tags[/api/models/tags]#

|[small]#Get models by tags#
|[small]#modzyClient.getTagsAndModels()#
|[small]#link:{doc-pages}marketplace/tags/retrieve-models-by-tags[/api/models/tags/:tagId]#

|[small]#Create a Job (Text)#
|[small]#modzyClient.submitJobText()#
|[small]#link:{doc-pages}jobs/jobs/submit-job-text[/api/jobs]#

|[small]#Create a Job (Embedded)#
|[small]#modzyClient.submitJobEmbedded()#
|[small]#link:{doc-pages}jobs/jobs/submit-job-embedded[/api/jobs]#

|[small]#Create a Job (AWS S3)#
|[small]#modzyClient.submitJobAWSS3()#
|[small]#link:{doc-pages}jobs/jobs/submit-job-aws[/api/jobs]#

|[small]#Create a Job (JDBC)#
|[small]#modzyClient.submitJobJDBC()#
|[small]#link:{doc-pages}jobs/jobs/submit-job-jdbc[/api/jobs]#

|[small]#Cancel a job#
|[small]#modzyClient.cancelJob()#
|[small]#link:{doc-pages}jobs/jobs/cancel-pending-job[/api/jobs/:jobId]#

|[small]#Hold until inference is complete#
|[small]#modzyClient.blockUntilComplete()#
|[small]#link:{doc-pages}jobs/jobs/submit-job-text[/api/jobs]#

|[small]#Get job details#
|[small]#modzyClient.getJob()#
|[small]#link:{doc-pages}jobs/jobs/retrieve-job-details[/api/jobs/:jobId]#

|[small]#Get results#
|[small]#modzyClient.cancelJob()#
|[small]#link:{doc-pages}jobs/results/retrieve-results[/api/results/:jobId]#

|[small]#List the job history#
|[small]#modzyClient.getJobHistory()#
|[small]#link:{doc-pages}jobs/job-history/retrieve-job-history[/api/jobs/history]#

|===


== Samples

++++
<p>Check out our <a href="src/main/java/com/modzy/sdk/samples" style="text-decoration:none">samples</a> for details on specific use cases.
</p>
++++

To run samples:

Set the base url and api key in each sample file:

[source, java]
----
// TODO: set the base url of modzy api and you api key
ModzyClient modzyClient = new ModzyClient("https://http://modzy.url", "modzy-api.key");
----
++++
<p>Or follow the instructions <a href="/contributing.adoc#set-environment-variables-in-bash" style="text-decoration:none">here</a> to learn more.
</p>
++++

And then, you can:

[source, bash]
----
`$ ./mvnw exec:java -Dexec.mainClass="com.modzy.sdk.samples.ModelSamples"`
----



== Contributing

++++
<p>We are happy to receive contributions from all of our users. Check out our <a href="/contributing.adoc" style="text-decoration:none">contributing file</a> to learn more.
</p>
++++


//For people who want to make changes to your project, it's helpful to have some documentation on how to get started. Perhaps there is a script that they should run or some environment variables that they need to set. Make these steps explicit. These instructions could also be useful to your future self.

==== Code of conduct

++++
<a href="/CODE_OF_CONDUCT.md" style="text-decoration:none"><img src="https://img.shields.io/badge/Contributor%20Covenant-v2.0%20adopted-ff69b4.svg" alt="Contributor Covenant" style="max-width:100%;"></a>
++++


//== Credits
